{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.regexp.flags.js","webpack:///./src/views/Art.vue?5662","webpack:///src/views/Art.vue","webpack:///./src/views/Art.vue?3022","webpack:///./src/views/Art.vue","webpack:///./node_modules/core-js/modules/es6.regexp.to-string.js","webpack:///./src/views/Art.vue?ad3d"],"names":["__webpack_require__","flags","f","RegExp","prototype","configurable","get","render","_vm","this","_h","$createElement","_c","_self","staticClass","artData","on","click","$event","rightToggle","_v","_s","title","rendered","slicedDate","date","domProps","innerHTML","content","_e","attrs","intSwitch","switch1","id","commentsData","length","_l","comment","index","key","author_name","parent","replyToName","toIndex","replace","commentToIndex","switch2","directives","name","rawName","value","expression","commentToName","rows","placeholder","input","target","composing","addContent","addName","class","disabled","addSending","type","addComment","scrollToBottom","toBottom","scrollToTop","mini","miniRight","titles","t","i","secondTitle","undefined","jumpToTitle","staticRenderFns","Artvue_type_script_lang_js_","data","postId","commentsLoadOK","navData","scrollY","autoScrolling","components","Loading","computed","_this","d","ds","split","slice","join","document","body","clientWidth","created","$route","query","fetchArticle","fetchComment","window","addEventListener","scroll","methods","documentElement","scrollTop","pageYOffset","src","tgt","_this2","clientHeight","last","setInterval","Math","min","clearInterval","pow","_clearInterval","apply","arguments","toString","_this3","form","FormData","append","fetch","ip","method","then","bus","$emit","_this4","res","json","setTimeout","getTitles","reg","exec","push","e","t_id","stopPropagation","p_nodes","getElementsByTagName","innerText","offsetTop","_this5","l","to","j","reload","$router","path","views_Artvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","anObject","$flags","DESCRIPTORS","TO_STRING","$toString","define","fn","call","source","R","concat","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Art_vue_vue_type_style_index_0_id_19c0a0ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Art_vue_vue_type_style_index_0_id_19c0a0ca_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"static/js/art.26e967ee.js","sourcesContent":["// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"art\"},[(_vm.artData.title)?_c('div',{staticClass:\"article\",on:{\"click\":function($event){_vm.rightToggle=false}}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.artData.title.rendered))]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.slicedDate(_vm.artData.date)))]),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.artData.content.rendered)}})]):_vm._e(),_c('Loading',{attrs:{\"intSwitch\":_vm.switch1}}),_c('div',{attrs:{\"id\":\"comment-header\"}},[_vm._v(\"> 评论 { \"+_vm._s(_vm.commentsData.length)+\" }\")]),(_vm.commentsLoadOK)?_c('div',{staticClass:\"comment-wrapper\"},_vm._l((_vm.commentsData),function(comment,index){return _c('div',{key:comment.id,staticClass:\"comment\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(comment.author_name))]),(comment.parent !== 0)?_c('span',{staticClass:\"replyto\"},[_vm._v(\"  -->  \"+_vm._s(_vm.replyToName(comment.toIndex)))]):_vm._e(),_c('span',{staticClass:\"content\"},[_vm._v(\": \"+_vm._s(comment.content.rendered.replace(/<[^>]*>/g, '')))]),_c('span',{staticClass:\"reply\",on:{\"click\":function($event){_vm.commentToIndex = index}}},[_vm._v(\"回复\")]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.slicedDate(comment.date)))])])}),0):_vm._e(),_c('Loading',{attrs:{\"intSwitch\":_vm.switch2}}),_c('ul',{staticClass:\"add\",on:{\"click\":function($event){_vm.rightToggle=false}}},[_c('li',[_vm._v(\"> 添加评论\"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.commentToIndex !== -1),expression:\"commentToIndex !== -1\"}],staticClass:\"addTo\"},[_vm._v(\"\\n        对  \"),_c('i',[_vm._v(\" \"+_vm._s(_vm.commentToName)+\" \")]),_c('span',{attrs:{\"id\":\"removeAddTo\"},on:{\"click\":function($event){_vm.commentToIndex = -1}}},[_vm._v(\"取消\")])])]),_c('li',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addContent),expression:\"addContent\"}],attrs:{\"name\":\"content\",\"rows\":\"2\",\"placeholder\":\"评论\"},domProps:{\"value\":(_vm.addContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addContent=$event.target.value}}})]),_c('li',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addName),expression:\"addName\"}],attrs:{\"name\":\"name\",\"placeholder\":\"名字\"},domProps:{\"value\":(_vm.addName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addName=$event.target.value}}})]),_c('li',[_c('input',{class:{disabled:_vm.addSending},attrs:{\"type\":\"submit\",\"value\":\"提交\"},on:{\"click\":_vm.addComment}})])]),_c('div',{staticClass:\"scrollToTop\",class:{scrollToBottom:_vm.toBottom},on:{\"click\":_vm.scrollToTop}}),_c('div',{staticClass:\"right\",class:{mini:!_vm.miniRight},on:{\"click\":function($event){_vm.rightToggle=!_vm.rightToggle}}},[(_vm.titles.length > 0)?_c('div',{staticClass:\"rbox\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"目录\")]),_vm._l((_vm.titles),function(t,i){return _c('div',{key:i,staticClass:\"item\",class:{secondTitle:t[1]!=undefined},on:{\"click\":function($event){_vm.jumpToTitle($event, i)}}},[(t[1]==undefined)?_c('span',[_vm._v(_vm._s(t[0]))]):_vm._e(),_vm._v(\"\\n        \"+_vm._s(t[2])+\"\\n      \")])})],2):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div class=\"art\">\r\n    <div class=\"article\" v-if=\"artData.title\" @click='rightToggle=false'>\r\n      <div class=\"title\">{{artData.title.rendered}}</div>\r\n      <div class=\"time\">{{slicedDate(artData.date)}}</div>\r\n      <div class=\"content\" v-html=\"artData.content.rendered\"></div>\r\n    </div>\r\n    <Loading :intSwitch=switch1></Loading>\r\n    <div id=\"comment-header\">> 评论 { {{commentsData.length}} }</div>\r\n    <div class=\"comment-wrapper\" v-if=\"commentsLoadOK\">\r\n      <div v-for=\"(comment, index) in commentsData\" :key=\"comment.id\" class=\"comment\">\r\n        <span class=\"name\">{{comment.author_name}}</span>\r\n        <span v-if=\"comment.parent !== 0\" class=\"replyto\">&nbsp;&nbsp;-->&nbsp;&nbsp;{{replyToName(comment.toIndex)}}</span>\r\n        <span class=\"content\">: {{comment.content.rendered.replace(/<[^>]*>/g, '')}}</span>\r\n        <span class=\"reply\" @click=\"commentToIndex = index\">回复</span>\r\n        <span class=\"time\">{{slicedDate(comment.date)}}</span>\r\n      </div>\r\n    </div>\r\n    <Loading :intSwitch=switch2></Loading>\r\n    <ul class=\"add\" @click='rightToggle=false'>\r\n      <li>> 添加评论<span v-show=\"commentToIndex !== -1\" class=\"addTo\">\r\n          对  <i> {{commentToName}} </i> \r\n          <span id=\"removeAddTo\" @click=\"commentToIndex = -1\">取消</span></span>\r\n      </li>\r\n      <li><textarea name=\"content\" rows=\"2\" placeholder=\"评论\" v-model=\"addContent\"/></li>\r\n      <li><input name=\"name\" placeholder=\"名字\" v-model=\"addName\"></li>\r\n      <li><input type=\"submit\" value=\"提交\" @click=\"addComment\" :class=\"{disabled:addSending}\"></li>\r\n    </ul>\r\n    <div class=\"scrollToTop\" :class=\"{scrollToBottom:toBottom}\" @click=\"scrollToTop\"></div>\r\n    <div class='right' :class='{mini:!miniRight}' @click='rightToggle=!rightToggle'>\r\n      <div class='rbox' v-if=\"titles.length > 0\">\r\n        <div class='title'>目录</div>\r\n        <div class='item' v-for='(t, i) in titles' :key='i' :class='{secondTitle:t[1]!=undefined}' @click='jumpToTitle($event, i)'>\r\n          <span v-if='t[1]==undefined'>{{t[0]}}</span>\r\n          {{t[2]}}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport bus from '@/bus.js'\r\nimport Loading from '@/components/Loading.vue'\r\nexport default {\r\n  name: 'art',\r\n  data () {\r\n    return {\r\n      postId: 0,\r\n      //data\r\n      artData: {\r\n      },\r\n      titles: [],\r\n      commentsData: {},\r\n      commentsLoadOK: false,\r\n      navData: [],\r\n      //other setting\r\n      switch1: 0,\r\n      switch2: 0,\r\n      scrollY: 0,\r\n      autoScrolling: undefined,\r\n      //addComment\r\n      commentToIndex: -1,\r\n      addName: '',\r\n      addContent: '',\r\n      addSending: false,\r\n      // right menu\r\n      rightToggle: false,\r\n    }\r\n  },\r\n  components: {\r\n    Loading\r\n  },\r\n  computed: {\r\n    replyToName: function () {\r\n      return id => this.commentsData[id].author_name\r\n    },\r\n    commentToName: function () {\r\n      let i = this.commentsData[this.commentToIndex]\r\n      return i ? i.author_name : ''\r\n    },\r\n    slicedDate: function () {\r\n      return function (d) {\r\n        let ds = d.split(/[-T:]/)\r\n        ds[0] = ds[0].slice(2, 4)\r\n        ds = ds.slice(0, -1)\r\n        ds = ds.slice(0,3).join('-') + ' ' + ds.slice(3,5).join(':')\r\n        return ds\r\n      }\r\n    },\r\n    toBottom: function () {\r\n      return this.scrollY <= 800\r\n    },\r\n    miniRight: function () {\r\n      return document.body.clientWidth > 750 || this.rightToggle\r\n    }\r\n  },\r\n  created () {\r\n    this.postId = this.$route.query.id\r\n    this.fetchArticle()\r\n    this.fetchComment()\r\n    window.addEventListener('scroll', this.scroll)\r\n  },\r\n  methods: {\r\n    scroll: function () {\r\n      this.scrollY = document.documentElement.scrollTop || \r\n                window.pageYOffset || \r\n                document.body.scrollTop;\r\n    },\r\n    scrollToTop: function () {\r\n      if (this.autoScrolling) return\r\n      let src, tgt\r\n      if (this.toBottom) {\r\n        src = this.scrollY\r\n        tgt = document.body.clientHeight - document.documentElement.clientHeight\r\n      } else {\r\n        src = this.scrollY\r\n        tgt = 0\r\n      }\r\n      if (document.body.clientWidth < 750) {\r\n        document.documentElement.scrollTop = tgt\r\n        return\r\n      }\r\n      let i = 0\r\n      // init last as src\r\n      let last = src\r\n      this.autoScrolling = setInterval(() => {\r\n        //200*0.012=2.4s\r\n        i = Math.min(1, i+0.006)\r\n        //如果在自动回顶时，用户scroll了，scrollTop就会和last不同，这时就停止\r\n        if (last != document.documentElement.scrollTop) this.clearInterval()\r\n        //偶数次方用1-Math，奇数次用1+Math\r\n        document.documentElement.scrollTop = src +  (tgt-src) * (1-Math.pow(i-1, 8))\r\n        last = document.documentElement.scrollTop\r\n        if (i >= 1) this.clearInterval()\r\n      }, 12)\r\n    },\r\n    clearInterval: function () {\r\n      clearInterval(this.autoScrolling)\r\n      this.autoScrolling = undefined\r\n    },\r\n    addComment () {\r\n      if (this.addSending) return\r\n      if (this.addContent.replace(/\\s+/g, '') === '') {\r\n        bus.$emit('pop', '姓名或评论不能为空*A*')\r\n        return\r\n      }\r\n      this.addSending = true\r\n      let form = new FormData()\r\n      let parent = this.commentToIndex == -1 ? 0 : this.commentsData[this.commentToIndex].id\r\n      form.append('author_name', this.addName)\r\n      form.append('content', this.addContent)\r\n      form.append('parent', parent)\r\n      form.append('post', this.postId)\r\n      form.append('author_email', '787817128@qq.com')\r\n      fetch(window.ip + 'comments', {\r\n        method: 'POST',\r\n        body: form\r\n      }).then(() => {\r\n        this.addSending = false\r\n        this.addName = this.addContent = ''\r\n        this.commentToIndex = -1\r\n        this.fetchComment()\r\n      })\r\n      return 0\r\n    },\r\n    fetchArticle () {\r\n      this.switch1 = 1\r\n      fetch(window.ip + 'posts/' + this.postId)\r\n      .then(res => {\r\n        return res.json()\r\n      }).then(json => {\r\n        this.artData = json\r\n        this.switch1 = 0\r\n        setTimeout(this.getTitles, 0)\r\n      })\r\n    },\r\n    getTitles() {\r\n      let reg = />([IVX]+\\.)([IVX]+)*(.+?(?=<))/g\r\n      let titles = []\r\n      let res\r\n      while ((res = reg.exec(this.artData.content.rendered)) != null)  {\r\n        titles.push([res[1], res[2], res[3]])\r\n      }\r\n      this.titles = titles\r\n    },\r\n    jumpToTitle (e, t_id) {\r\n      e.stopPropagation()\r\n      let t = this.titles[t_id].join('')\r\n      let p_nodes = document.getElementsByTagName('p')\r\n      for (let i = 0; i < p_nodes.length; i++) {\r\n        if (p_nodes[i].innerText == t) {\r\n          document.documentElement.scrollTop = p_nodes[i].offsetTop\r\n          break\r\n        }\r\n      }\r\n    },\r\n    fetchComment () {\r\n      this.switch2 = 1\r\n      fetch(window.ip + 'comments?order=asc&post=' + this.postId)\r\n      .then(res => {\r\n        return res.json()\r\n      }).then(json => {\r\n        this.commentsData = json\r\n        let l = this.commentsData.length\r\n        for (let i = 0; i < l; i++) {\r\n          let to = this.commentsData[i].parent\r\n          if (to !== 0) {\r\n            for (let j = 0; j < i; j++) {\r\n              if (this.commentsData[j].id === to) {\r\n                this.commentsData[i].toIndex = j\r\n                break\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.switch2 = 0\r\n        this.commentsLoadOK = true\r\n      })\r\n    },\r\n    reload (index) {\r\n      let id = this.navData[index].id\r\n      if (id === -1) {\r\n        bus.$emit('pop', this.navData[index].title)\r\n        return\r\n      }\r\n      this.$router.push({path: 'art', query: {id: id}})\r\n      this.postId = this.$route.query.id\r\n      this.artData = {}\r\n      this.commentsData = {}\r\n      this.commentsLoadOK = false\r\n      this.navData = []\r\n      //other setting\r\n      this.scrollY = 0\r\n      //addComment\r\n      this.commentToIndex = -1\r\n      this.addName = ''\r\n      this.addContent = ''\r\n      this.fetchArticle()\r\n      this.fetchComment()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.art {\r\n  position: relative;\r\n  margin: 0 30%;\r\n  padding-bottom: 2rem;\r\n  border-right: 1px solid #eee;\r\n}\r\n.article {\r\n  padding: 2rem;\r\n  .time {\r\n    padding: .5rem 0;\r\n    color: #888;\r\n    font-size: 0.875rem;\r\n  }\r\n  .content {\r\n    font-size: .9375rem;\r\n    line-height: 1rem;\r\n    /deep/ p {\r\n      margin: 1.25rem 0;\r\n      line-height: 1.625rem;\r\n      text-align: left;\r\n      word-wrap: break-word;\r\n    }\r\n    /deep/ a {\r\n      text-decoration: underline;\r\n    }\r\n    /deep/ img {\r\n      max-width: 100%;\r\n      height: auto;\r\n      margin-bottom: .75rem;\r\n    }\r\n    /deep/ figcaption {\r\n      text-align: center;\r\n      color: #888;\r\n      font-size: 14px;\r\n      font-style: italic;\r\n    }\r\n    /deep/ code {\r\n      display: block;\r\n      margin: .5rem 0;\r\n      padding: .75rem 1.25rem;\r\n      line-height: 1.25rem;\r\n      text-align: left;\r\n      background-color: #FaFaFF;\r\n      word-wrap: break-word;\r\n      font-family: \"Courier New\";\r\n      border-radius: .5rem;\r\n    }\r\n    /deep/ pre {\r\n      white-space: pre-wrap;\r\n    }\r\n  }\r\n}\r\n.right {\r\n  position: fixed;\r\n  left: calc(70% + 2rem);\r\n  top: 3rem;\r\n  width: 15rem;\r\n  .rbox {\r\n    border-radius: 1rem;\r\n    background-color: #f6f6fc;\r\n    text-align: left;\r\n    font-size: .875rem;\r\n    .title {\r\n      padding: .75rem 1rem;\r\n      border-bottom: 1px solid #eee;\r\n      font-size: 16px;\r\n      font-weight: bold;\r\n    }\r\n    .item {\r\n      padding: .5rem 1rem;\r\n      color: #555;\r\n      cursor: pointer;\r\n      transition: color .3s ease;\r\n      &:hover {\r\n        color: #000;\r\n      }\r\n    }\r\n    .secondTitle {\r\n      padding: 0 1.5rem .5rem 2rem;\r\n      color: #888;\r\n    }\r\n  }\r\n}\r\n#comment-header {\r\n  padding: 0 2rem;\r\n  font-size: .9375rem;\r\n  line-height: 1.5rem;\r\n  text-align: left;\r\n}\r\n.comment-wrapper {\r\n  padding: 0 2rem 2rem 2rem;\r\n  text-align: left;\r\n  .comment {\r\n    margin: 0.5rem 0;\r\n    font-size: 0.875rem;\r\n    .name {\r\n      font-size: 0.875rem;\r\n    }\r\n    .time, .reply{\r\n      opacity: 0;\r\n      color: #AAA;\r\n      transition: .3s ease;\r\n      margin-left: .5rem;\r\n    }\r\n    .reply {\r\n      margin-left: 1rem;\r\n      cursor: pointer;\r\n    }\r\n    &:hover .time {\r\n      opacity: 1;\r\n    }\r\n    &:hover .reply {\r\n      opacity: 1;\r\n      margin-left: .5rem;\r\n    }\r\n  }\r\n}\r\n.add {\r\n  margin: 0 2rem;\r\n  text-align: left;\r\n  font-size: 0.9375rem;\r\n  li {\r\n    margin-bottom: 1rem;\r\n    span {\r\n      margin-right: 1rem;\r\n    }\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n  #removeAddTo {\r\n    cursor: pointer;\r\n    color: #888;\r\n  }\r\n  li:first-child span:first-child {\r\n    margin-left: 1rem;\r\n  }\r\n  li:last-child span{\r\n    display: inline-block;\r\n    height: 2rem;\r\n  }\r\n  input, textarea {\r\n    line-height: 1.5rem;\r\n    padding: .25rem .625rem;\r\n    border: 1px #ddd solid;\r\n    transition: .2s ease;\r\n    outline: none;\r\n    color: #2c3e50;\r\n    resize: none;\r\n    width: 8rem;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n  }\r\n  input[type=submit] {\r\n    width: 4rem;\r\n  }\r\n  .disabled {\r\n    color: #AAA;\r\n  }\r\n  textarea {\r\n    width: 20rem;\r\n  }\r\n  input:focus {\r\n    border: 1px #4FB9F1 solid;\r\n  }\r\n  textarea:focus {\r\n    border: 1px #4FB9F1 solid;\r\n  }\r\n}\r\n.scrollToTop {\r\n  position: fixed;\r\n  width: 2rem;\r\n  height: 2rem;\r\n  right: 2rem;\r\n  bottom: 8rem;\r\n  background-color: #eeeef4;\r\n  background-image: url(../../public/top.png);\r\n  background-size: 30% 30%;\r\n  background-position: 50% 50%;\r\n  background-repeat: no-repeat;\r\n  border-radius: 50%;\r\n  cursor: pointer;\r\n  transition: .2s ease;\r\n  &:hover {\r\n    background-position: 50% 40%;\r\n  }\r\n}\r\n.scrollToBottom {\r\n  transform: rotateZ(180deg);\r\n}\r\n@media (max-width: 750px) {\r\n  .art {\r\n    margin: 0;\r\n    padding: 0 0 6rem 0;\r\n    border-right: none;\r\n  }\r\n  .comment .time {\r\n    display: none;\r\n  }\r\n  .art .add li textarea {\r\n    width: calc(100% - 22px);\r\n  }\r\n  .art .article .content img {\r\n    max-width: 100%;\r\n    height: auto;\r\n  }\r\n  .scrollToTop {\r\n    left: 1rem;\r\n    bottom: 5rem;\r\n    width: 2.5rem;\r\n    height: 2.5rem;\r\n  }\r\n  .right {\r\n    position: fixed;\r\n    top: auto;\r\n    left: 1rem;\r\n    bottom: 8rem;\r\n  }\r\n  .mini {\r\n    width: 2.5rem;\r\n    height: 2.5rem;\r\n    background-color: #F6F6FC;\r\n    background-image: url(../../public/menu.svg);\r\n    background-size: 1rem;\r\n    background-repeat: no-repeat;\r\n    background-position: 50% 50%;\r\n    border-radius: 1.5rem;\r\n    & div {\r\n      display: none;\r\n    }\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Art.vue?vue&type=template&id=19c0a0ca&scoped=true&\"\nimport script from \"./Art.vue?vue&type=script&lang=js&\"\nexport * from \"./Art.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Art.vue?vue&type=style&index=0&id=19c0a0ca&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19c0a0ca\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=style&index=0&id=19c0a0ca&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=style&index=0&id=19c0a0ca&lang=scss&scoped=true&\""],"sourceRoot":""}