{"version":3,"sources":["webpack:///./node_modules/core-js/modules/es6.regexp.flags.js","webpack:///./src/views/Art.vue?e689","webpack:///src/views/Art.vue","webpack:///./src/views/Art.vue?3022","webpack:///./src/views/Art.vue","webpack:///./node_modules/core-js/modules/es6.regexp.to-string.js","webpack:///./src/views/Art.vue?e224"],"names":["__webpack_require__","flags","f","RegExp","prototype","configurable","get","render","_vm","this","_h","$createElement","_c","_self","staticClass","artData","_v","_s","title","rendered","slicedDate","date","domProps","innerHTML","content","_e","attrs","intSwitch","switch1","id","commentsData","length","_l","comment","index","key","author_name","parent","replyToName","toIndex","replace","on","click","$event","commentToIndex","switch2","directives","name","rawName","value","expression","commentToName","rows","placeholder","input","target","composing","addContent","addName","class","disabled","addSending","type","addComment","scrollToBottom","toBottom","scrollToTop","titles","t","i","secondTitle","undefined","jumpToTitle","staticRenderFns","Artvue_type_script_lang_js_","data","postId","commentsLoadOK","navData","scrollY","autoScrolling","components","Loading","computed","_this","d","ds","split","slice","join","created","$route","query","fetchArticle","fetchComment","window","addEventListener","scroll","methods","document","documentElement","scrollTop","pageYOffset","body","_this2","src","tgt","clientHeight","last","setInterval","Math","min","clearInterval","pow","_clearInterval","apply","arguments","toString","_this3","form","FormData","append","fetch","ip","method","then","bus","$emit","_this4","res","json","setTimeout","getTitles","reg","exec","push","t_id","p_nodes","getElementsByTagName","innerText","offsetTop","_this5","l","to","j","reload","$router","path","views_Artvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__","anObject","$flags","DESCRIPTORS","TO_STRING","$toString","define","fn","call","source","R","concat","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Art_vue_vue_type_style_index_0_id_0870171a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Art_vue_vue_type_style_index_0_id_0870171a_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"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","file":"static/js/art.0cfa4f6e.js","sourcesContent":["// 21.2.5.3 get RegExp.prototype.flags()\nif (require('./_descriptors') && /./g.flags != 'g') require('./_object-dp').f(RegExp.prototype, 'flags', {\n  configurable: true,\n  get: require('./_flags')\n});\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"art\"},[(_vm.artData.title)?_c('div',{staticClass:\"article\"},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.artData.title.rendered))]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.slicedDate(_vm.artData.date)))]),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.artData.content.rendered)}})]):_vm._e(),_c('Loading',{attrs:{\"intSwitch\":_vm.switch1}}),_c('div',{attrs:{\"id\":\"comment-header\"}},[_vm._v(\"> 评论 { \"+_vm._s(_vm.commentsData.length)+\" }\")]),(_vm.commentsLoadOK)?_c('div',{staticClass:\"comment-wrapper\"},_vm._l((_vm.commentsData),function(comment,index){return _c('div',{key:comment.id,staticClass:\"comment\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(comment.author_name))]),(comment.parent !== 0)?_c('span',{staticClass:\"replyto\"},[_vm._v(\"  -->  \"+_vm._s(_vm.replyToName(comment.toIndex)))]):_vm._e(),_c('span',{staticClass:\"content\"},[_vm._v(\": \"+_vm._s(comment.content.rendered.replace(/<[^>]*>/g, '')))]),_c('span',{staticClass:\"reply\",on:{\"click\":function($event){_vm.commentToIndex = index}}},[_vm._v(\"回复\")]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.slicedDate(comment.date)))])])}),0):_vm._e(),_c('Loading',{attrs:{\"intSwitch\":_vm.switch2}}),_c('ul',{staticClass:\"add\"},[_c('li',[_vm._v(\"> 添加评论\"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.commentToIndex !== -1),expression:\"commentToIndex !== -1\"}],staticClass:\"addTo\"},[_vm._v(\"\\n        对  \"),_c('i',[_vm._v(\" \"+_vm._s(_vm.commentToName)+\" \")]),_c('span',{attrs:{\"id\":\"removeAddTo\"},on:{\"click\":function($event){_vm.commentToIndex = -1}}},[_vm._v(\"取消\")])])]),_c('li',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addContent),expression:\"addContent\"}],attrs:{\"name\":\"content\",\"rows\":\"2\",\"placeholder\":\"评论\"},domProps:{\"value\":(_vm.addContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addContent=$event.target.value}}})]),_c('li',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addName),expression:\"addName\"}],attrs:{\"name\":\"name\",\"placeholder\":\"名字\"},domProps:{\"value\":(_vm.addName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addName=$event.target.value}}})]),_c('li',[_c('input',{class:{disabled:_vm.addSending},attrs:{\"type\":\"submit\",\"value\":\"提交\"},on:{\"click\":_vm.addComment}})])]),_c('div',{staticClass:\"scrollToTop\",class:{scrollToBottom:_vm.toBottom},on:{\"click\":_vm.scrollToTop}}),_c('div',{staticClass:\"right\"},[(_vm.titles.length > 0)?_c('div',{staticClass:\"rbox\"},[_c('div',{staticClass:\"title\"},[_vm._v(\"目录\")]),_vm._l((_vm.titles),function(t,i){return _c('div',{key:i,staticClass:\"item\",class:{secondTitle:t[1]!=undefined},on:{\"click\":function($event){_vm.jumpToTitle(i)}}},[(t[1]==undefined)?_c('span',[_vm._v(_vm._s(t[0]))]):_vm._e(),_vm._v(\"\\n        \"+_vm._s(t[2])+\"\\n      \")])})],2):_vm._e()])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"art\">\n    <div class=\"article\" v-if=\"artData.title\">\n      <div class=\"title\">{{artData.title.rendered}}</div>\n      <div class=\"time\">{{slicedDate(artData.date)}}</div>\n      <div class=\"content\" v-html=\"artData.content.rendered\"></div>\n    </div>\n    <Loading :intSwitch=switch1></Loading>\n    <div id=\"comment-header\">> 评论 { {{commentsData.length}} }</div>\n    <div class=\"comment-wrapper\" v-if=\"commentsLoadOK\">\n      <div v-for=\"(comment, index) in commentsData\" :key=\"comment.id\" class=\"comment\">\n        <span class=\"name\">{{comment.author_name}}</span>\n        <span v-if=\"comment.parent !== 0\" class=\"replyto\">&nbsp;&nbsp;-->&nbsp;&nbsp;{{replyToName(comment.toIndex)}}</span>\n        <span class=\"content\">: {{comment.content.rendered.replace(/<[^>]*>/g, '')}}</span>\n        <span class=\"reply\" @click=\"commentToIndex = index\">回复</span>\n        <span class=\"time\">{{slicedDate(comment.date)}}</span>\n      </div>\n    </div>\n    <Loading :intSwitch=switch2></Loading>\n    <ul class=\"add\">\n      <li>> 添加评论<span v-show=\"commentToIndex !== -1\" class=\"addTo\">\n          对  <i> {{commentToName}} </i> \n          <span id=\"removeAddTo\" @click=\"commentToIndex = -1\">取消</span></span>\n      </li>\n      <li><textarea name=\"content\" rows=\"2\" placeholder=\"评论\" v-model=\"addContent\"/></li>\n      <li><input name=\"name\" placeholder=\"名字\" v-model=\"addName\"></li>\n      <li><input type=\"submit\" value=\"提交\" @click=\"addComment\" :class=\"{disabled:addSending}\"></li>\n    </ul>\n    <div class=\"scrollToTop\" :class=\"{scrollToBottom:toBottom}\" @click=\"scrollToTop\"></div>\n    <div class='right'>\n      <div class='rbox' v-if=\"titles.length > 0\">\n        <div class='title'>目录</div>\n        <div class='item' v-for='(t, i) in titles' :key='i' :class='{secondTitle:t[1]!=undefined}' @click='jumpToTitle(i)'>\n          <span v-if='t[1]==undefined'>{{t[0]}}</span>\n          {{t[2]}}\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport bus from '@/bus.js'\nimport Loading from '@/components/Loading.vue'\nexport default {\n  name: 'art',\n  data () {\n    return {\n      postId: 0,\n      //data\n      artData: {\n      },\n      titles: [],\n      commentsData: {},\n      commentsLoadOK: false,\n      navData: [],\n      //other setting\n      switch1: 0,\n      switch2: 0,\n      scrollY: 0,\n      autoScrolling: undefined,\n      //addComment\n      commentToIndex: -1,\n      addName: '',\n      addContent: '',\n      addSending: false,\n    }\n  },\n  components: {\n    Loading\n  },\n  computed: {\n    replyToName: function () {\n      return id => this.commentsData[id].author_name\n    },\n    commentToName: function () {\n      let i = this.commentsData[this.commentToIndex]\n      return i ? i.author_name : ''\n    },\n    slicedDate: function () {\n      return function (d) {\n        let ds = d.split(/[-T:]/)\n        ds[0] = ds[0].slice(2, 4)\n        ds = ds.slice(0, -1)\n        ds = ds.slice(0,3).join('-') + ' ' + ds.slice(3,5).join(':')\n        return ds\n      }\n    },\n    toBottom: function () {\n      return this.scrollY <= 800\n    }\n  },\n  created () {\n    this.postId = this.$route.query.id\n    this.fetchArticle()\n    this.fetchComment()\n    window.addEventListener('scroll', this.scroll)\n  },\n  methods: {\n    scroll: function () {\n      this.scrollY = document.documentElement.scrollTop || \n                window.pageYOffset || \n                document.body.scrollTop;\n    },\n    scrollToTop: function () {\n      if (this.autoScrolling) return\n      let src, tgt\n      if (this.toBottom) {\n        src = this.scrollY\n        tgt = document.body.clientHeight - document.documentElement.clientHeight\n      } else {\n        src = this.scrollY\n        tgt = 0\n      }\n      let i = 0\n      // init last as src\n      let last = src\n      this.autoScrolling = setInterval(() => {\n        //200*0.012=2.4s\n        i = Math.min(1, i+0.006)\n        //如果在自动回顶时，用户scroll了，scrollTop就会和last不同，这时就停止\n        if (last != document.documentElement.scrollTop) this.clearInterval()\n        //偶数次方用1-Math，奇数次用1+Math\n        document.documentElement.scrollTop = src +  (tgt-src) * (1-Math.pow(i-1, 8))\n        last = document.documentElement.scrollTop\n        if (i >= 1) this.clearInterval()\n      }, 12)\n    },\n    clearInterval: function () {\n      clearInterval(this.autoScrolling)\n      this.autoScrolling = undefined\n    },\n    addComment () {\n      if (this.addSending) return\n      if (this.addContent.replace(/\\s+/g, '') === '') {\n        bus.$emit('pop', '姓名或评论不能为空*A*')\n        return\n      }\n      this.addSending = true\n      let form = new FormData()\n      let parent = this.commentToIndex == -1 ? 0 : this.commentsData[this.commentToIndex].id\n      form.append('author_name', this.addName)\n      form.append('content', this.addContent)\n      form.append('parent', parent)\n      form.append('post', this.postId)\n      form.append('author_email', '787817128@qq.com')\n      fetch(window.ip + 'comments', {\n        method: 'POST',\n        body: form\n      }).then(() => {\n        this.addSending = false\n        this.addName = this.addContent = ''\n        this.commentToIndex = -1\n        this.fetchComment()\n      })\n      return 0\n    },\n    fetchArticle () {\n      this.switch1 = 1\n      fetch(window.ip + 'posts/' + this.postId)\n      .then(res => {\n        return res.json()\n      }).then(json => {\n        this.artData = json\n        this.switch1 = 0\n        setTimeout(this.getTitles, 0)\n      })\n    },\n    getTitles() {\n      let reg = />([IVX]+\\.)([IVX]+)*(.+?(?=<))/g\n      let titles = []\n      let res\n      while ((res = reg.exec(this.artData.content.rendered)) != null)  {\n        titles.push([res[1], res[2], res[3]])\n      }\n      this.titles = titles\n    },\n    jumpToTitle (t_id) {\n      let t = this.titles[t_id].join('')\n      let p_nodes = document.getElementsByTagName('p')\n      for (let i = 0; i < p_nodes.length; i++) {\n        if (p_nodes[i].innerText == t) {\n          document.documentElement.scrollTop = p_nodes[i].offsetTop\n          break\n        }\n      }\n    },\n    fetchComment () {\n      this.switch2 = 1\n      fetch(window.ip + 'comments?order=asc&post=' + this.postId)\n      .then(res => {\n        return res.json()\n      }).then(json => {\n        this.commentsData = json\n        let l = this.commentsData.length\n        for (let i = 0; i < l; i++) {\n          let to = this.commentsData[i].parent\n          if (to !== 0) {\n            for (let j = 0; j < i; j++) {\n              if (this.commentsData[j].id === to) {\n                this.commentsData[i].toIndex = j\n                break\n              }\n            }\n          }\n        }\n        this.switch2 = 0\n        this.commentsLoadOK = true\n      })\n    },\n    reload (index) {\n      let id = this.navData[index].id\n      if (id === -1) {\n        bus.$emit('pop', this.navData[index].title)\n        return\n      }\n      this.$router.push({path: 'art', query: {id: id}})\n      this.postId = this.$route.query.id\n      this.artData = {}\n      this.commentsData = {}\n      this.commentsLoadOK = false\n      this.navData = []\n      //other setting\n      this.scrollY = 0\n      //addComment\n      this.commentToIndex = -1\n      this.addName = ''\n      this.addContent = ''\n      this.fetchArticle()\n      this.fetchComment()\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n.art {\n  position: relative;\n  margin: 0 30%;\n  padding-bottom: 2rem;\n  border-right: 1px solid #eee;\n}\n.article {\n  padding: 2rem;\n  .time {\n    padding: .5rem 0;\n    color: #888;\n    font-size: 0.875rem;\n  }\n  .content {\n    font-size: .9375rem;\n    line-height: 1rem;\n    /deep/ p {\n      margin: 1.25rem 0;\n      line-height: 1.625rem;\n      text-align: left;\n      word-wrap: break-word;\n    }\n    /deep/ a {\n      text-decoration: underline;\n    }\n    /deep/ img {\n      max-width: 100%;\n      height: auto;\n      margin-bottom: .75rem;\n    }\n    /deep/ figcaption {\n      text-align: center;\n      color: #888;\n      font-size: 14px;\n      font-style: italic;\n    }\n    /deep/ code {\n      display: block;\n      margin: .5rem 0;\n      padding: .75rem 1.25rem;\n      line-height: 1.25rem;\n      text-align: left;\n      background-color: #FaFaFF;\n      word-wrap: break-word;\n      font-family: \"Courier New\";\n      border-radius: .5rem;\n    }\n    /deep/ pre {\n      white-space: pre-wrap;\n    }\n  }\n}\n.right {\n  position: fixed;\n  left: calc(70% + 2rem);\n  top: 3rem;\n  width: 15rem;\n  .rbox {\n    border-radius: 1rem;\n    background-color: #f6f6fc;\n    text-align: left;\n    font-size: .875rem;\n    .title {\n      padding: .75rem 1rem;\n      border-bottom: 1px solid #eee;\n      font-size: 16px;\n      font-weight: bold;\n    }\n    .item {\n      padding: .5rem 1rem;\n      color: #555;\n      cursor: pointer;\n      transition: color .3s ease;\n      &:hover {\n        color: #000;\n      }\n    }\n    .secondTitle {\n      padding: 0 1.5rem .5rem 2rem;\n      color: #888;\n    }\n  }\n}\n#comment-header {\n  padding: 0 2rem;\n  font-size: .9375rem;\n  line-height: 1.5rem;\n  text-align: left;\n}\n.comment-wrapper {\n  padding: 0 2rem 2rem 2rem;\n  text-align: left;\n  .comment {\n    margin: 0.5rem 0;\n    font-size: 0.875rem;\n    .name {\n      font-size: 0.875rem;\n    }\n    .time, .reply{\n      opacity: 0;\n      color: #AAA;\n      transition: .3s ease;\n      margin-left: .5rem;\n    }\n    .reply {\n      margin-left: 1rem;\n      cursor: pointer;\n    }\n    &:hover .time {\n      opacity: 1;\n    }\n    &:hover .reply {\n      opacity: 1;\n      margin-left: .5rem;\n    }\n  }\n}\n.add {\n  margin: 0 2rem;\n  text-align: left;\n  font-size: 0.9375rem;\n  li {\n    margin-bottom: 1rem;\n    span {\n      margin-right: 1rem;\n    }\n    &:last-child {\n      margin-bottom: 0;\n    }\n  }\n  #removeAddTo {\n    cursor: pointer;\n    color: #888;\n  }\n  li:first-child span:first-child {\n    margin-left: 1rem;\n  }\n  li:last-child span{\n    display: inline-block;\n    height: 2rem;\n  }\n  input, textarea {\n    line-height: 1.5rem;\n    padding: .25rem .625rem;\n    border: 1px #ddd solid;\n    transition: .2s ease;\n    outline: none;\n    color: #2c3e50;\n    resize: none;\n    width: 8rem;\n    font-family: Arial, Helvetica, sans-serif;\n  }\n  input[type=submit] {\n    width: 4rem;\n  }\n  .disabled {\n    color: #AAA;\n  }\n  textarea {\n    width: 20rem;\n  }\n  input:focus {\n    border: 1px #4FB9F1 solid;\n  }\n  textarea:focus {\n    border: 1px #4FB9F1 solid;\n  }\n}\n.scrollToTop {\n  position: fixed;\n  width: 2rem;\n  height: 2rem;\n  right: 2rem;\n  bottom: 8rem;\n  background-color: #eeeef4;\n  background-image: url(../../public/top.png);\n  background-size: 30% 30%;\n  background-position: 50% 50%;\n  background-repeat: no-repeat;\n  border-radius: 50%;\n  cursor: pointer;\n  transition: .2s ease;\n  &:hover {\n    background-position: 50% 40%;\n  }\n}\n.scrollToBottom {\n  transform: rotateZ(180deg);\n}\n@media (max-width: 750px) {\n  .art {\n    margin: 0;\n    padding: 0 0 6rem 0;\n    border-right: none;\n  }\n  .comment .time {\n    display: none;\n  }\n  .art .add li textarea {\n    width: calc(100% - 22px);\n  }\n  .art .article .content img {\n    max-width: 100%;\n    height: auto;\n  }\n  .scrollToTop {\n    display: none;\n  }\n  .right {\n    display: none;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Art.vue?vue&type=template&id=0870171a&scoped=true&\"\nimport script from \"./Art.vue?vue&type=script&lang=js&\"\nexport * from \"./Art.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Art.vue?vue&type=style&index=0&id=0870171a&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0870171a\",\n  null\n  \n)\n\nexport default component.exports","'use strict';\nrequire('./es6.regexp.flags');\nvar anObject = require('./_an-object');\nvar $flags = require('./_flags');\nvar DESCRIPTORS = require('./_descriptors');\nvar TO_STRING = 'toString';\nvar $toString = /./[TO_STRING];\n\nvar define = function (fn) {\n  require('./_redefine')(RegExp.prototype, TO_STRING, fn, true);\n};\n\n// 21.2.5.14 RegExp.prototype.toString()\nif (require('./_fails')(function () { return $toString.call({ source: 'a', flags: 'b' }) != '/a/b'; })) {\n  define(function toString() {\n    var R = anObject(this);\n    return '/'.concat(R.source, '/',\n      'flags' in R ? R.flags : !DESCRIPTORS && R instanceof RegExp ? $flags.call(R) : undefined);\n  });\n// FF44- RegExp#toString has a wrong name\n} else if ($toString.name != TO_STRING) {\n  define(function toString() {\n    return $toString.call(this);\n  });\n}\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=style&index=0&id=0870171a&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=style&index=0&id=0870171a&lang=scss&scoped=true&\""],"sourceRoot":""}