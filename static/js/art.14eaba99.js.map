{"version":3,"sources":["webpack:///./src/views/Art.vue?7c12","webpack:///./src/views/Art.vue?aba4","webpack:///src/views/Art.vue","webpack:///./src/views/Art.vue?3022","webpack:///./src/views/Art.vue"],"names":["_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Art_vue_vue_type_style_index_0_id_60c243dd_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_Art_vue_vue_type_style_index_0_id_60c243dd_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n","render","_vm","this","_h","$createElement","_c","_self","scopedSlots","_u","key","fn","artData","staticClass","on","click","$event","rightToggle","_v","_s","title","rendered","slicedDate","date","domProps","innerHTML","content","_e","attrs","intSwitch","switch1","id","commentsData","length","_l","comment","index","author_name","parent","replyToName","toIndex","replace","commentToIndex","switch2","directives","name","rawName","value","expression","commentToName","rows","placeholder","input","target","composing","addContent","addName","class","disabled","addSending","type","addComment","proxy","titles","mini","miniRight","t","i","second","undefined","jumpToTitle","staticRenderFns","Artvue_type_script_lang_js_","data","postId","commentsLoadOK","navData","mainNode","components","Loading","layout","Layout","rbox","Rbox","computed","_this","d","ds","split","slice","join","document","body","clientWidth","created","$route","query","fetchArticle","fetchComment","mounted","getElementsByClassName","methods","_this2","form","FormData","append","fetch","window","ip","method","then","$bus","$emit","_this3","res","json","setTimeout","getTitles","reg","exec","push","e","t_id","stopPropagation","p_nodes","getElementsByTagName","innerText","scrollTop","offsetTop","_this4","l","to","j","reload","$router","path","views_Artvue_type_script_lang_js_","component","Object","componentNormalizer","__webpack_exports__"],"mappings":"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","file":"static/js/art.14eaba99.js","sourcesContent":["import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=style&index=0&id=60c243dd&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=style&index=0&id=60c243dd&lang=scss&scoped=true&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('layout',{scopedSlots:_vm._u([{key:\"main\",fn:function(){return [(_vm.artData.title)?_c('div',{staticClass:\"article\",on:{\"click\":function($event){_vm.rightToggle=false}}},[_c('div',{staticClass:\"title\"},[_vm._v(_vm._s(_vm.artData.title.rendered))]),_c('div',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.slicedDate(_vm.artData.date)))]),_c('div',{staticClass:\"content\",domProps:{\"innerHTML\":_vm._s(_vm.artData.content.rendered)}})]):_vm._e(),_c('Loading',{attrs:{\"intSwitch\":_vm.switch1}}),_c('div',{attrs:{\"id\":\"comment-header\"}},[_vm._v(\"> 评论 { \"+_vm._s(_vm.commentsData.length)+\" }\")]),(_vm.commentsLoadOK)?_c('div',{staticClass:\"comment-wrapper\"},_vm._l((_vm.commentsData),function(comment,index){return _c('div',{key:comment.id,staticClass:\"comment\"},[_c('span',{staticClass:\"name\"},[_vm._v(_vm._s(comment.author_name))]),(comment.parent !== 0)?_c('span',{staticClass:\"replyto\"},[_vm._v(\"  -->  \"+_vm._s(_vm.replyToName(comment.toIndex)))]):_vm._e(),_c('span',{staticClass:\"content\"},[_vm._v(\": \"+_vm._s(comment.content.rendered.replace(/<[^>]*>/g, '')))]),_c('span',{staticClass:\"reply\",on:{\"click\":function($event){_vm.commentToIndex = index}}},[_vm._v(\"回复\")]),_c('span',{staticClass:\"time\"},[_vm._v(_vm._s(_vm.slicedDate(comment.date)))])])}),0):_vm._e(),_c('Loading',{attrs:{\"intSwitch\":_vm.switch2}}),_c('ul',{staticClass:\"add\",on:{\"click\":function($event){_vm.rightToggle=false}}},[_c('li',[_vm._v(\"> 添加评论\"),_c('span',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.commentToIndex !== -1),expression:\"commentToIndex !== -1\"}],staticClass:\"addTo\"},[_vm._v(\"\\n            对  \"),_c('i',[_vm._v(\" \"+_vm._s(_vm.commentToName)+\" \")]),_c('span',{attrs:{\"id\":\"removeAddTo\"},on:{\"click\":function($event){_vm.commentToIndex = -1}}},[_vm._v(\"取消\")])])]),_c('li',[_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addContent),expression:\"addContent\"}],attrs:{\"name\":\"content\",\"rows\":\"2\",\"placeholder\":\"评论\"},domProps:{\"value\":(_vm.addContent)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addContent=$event.target.value}}})]),_c('li',[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.addName),expression:\"addName\"}],attrs:{\"name\":\"name\",\"placeholder\":\"名字\"},domProps:{\"value\":(_vm.addName)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.addName=$event.target.value}}})]),_c('li',[_c('input',{class:{disabled:_vm.addSending},attrs:{\"type\":\"submit\",\"value\":\"提交\"},on:{\"click\":_vm.addComment}})])])]},proxy:true},{key:\"right\",fn:function(){return [(_vm.titles.length > 0)?_c('rbox',{class:{mini:!_vm.miniRight},attrs:{\"title\":\"目录\"},on:{\"click\":function($event){_vm.rightToggle=!_vm.rightToggle}},scopedSlots:_vm._u([{key:\"list\",fn:function(){return _vm._l((_vm.titles),function(t,i){return _c('div',{key:i,staticClass:\"item\",class:{second:t[1]!=undefined},on:{\"click\":function($event){return _vm.jumpToTitle($event, i)}}},[(t[1]==undefined)?_c('span',[_vm._v(_vm._s(t[0]))]):_vm._e(),_vm._v(\"\\n            \"+_vm._s(t[2])+\"\\n          \")])})},proxy:true}],null,false,3800357185)}):_vm._e()]},proxy:true}])})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div>\r\n    <layout>\r\n      <template #main>\r\n        <div class=\"article\" v-if=\"artData.title\" @click='rightToggle=false'>\r\n          <div class=\"title\">{{artData.title.rendered}}</div>\r\n          <div class=\"time\">{{slicedDate(artData.date)}}</div>\r\n          <div class=\"content\" v-html=\"artData.content.rendered\"></div>\r\n        </div>\r\n        <Loading :intSwitch=switch1></Loading>\r\n        <div id=\"comment-header\">> 评论 { {{commentsData.length}} }</div>\r\n        <div class=\"comment-wrapper\" v-if=\"commentsLoadOK\">\r\n          <div v-for=\"(comment, index) in commentsData\" :key=\"comment.id\" class=\"comment\">\r\n            <span class=\"name\">{{comment.author_name}}</span>\r\n            <span v-if=\"comment.parent !== 0\" class=\"replyto\">&nbsp;&nbsp;-->&nbsp;&nbsp;{{replyToName(comment.toIndex)}}</span>\r\n            <span class=\"content\">: {{comment.content.rendered.replace(/<[^>]*>/g, '')}}</span>\r\n            <span class=\"reply\" @click=\"commentToIndex = index\">回复</span>\r\n            <span class=\"time\">{{slicedDate(comment.date)}}</span>\r\n          </div>\r\n        </div>\r\n        <Loading :intSwitch=switch2></Loading>\r\n        <ul class=\"add\" @click='rightToggle=false'>\r\n          <li>> 添加评论<span v-show=\"commentToIndex !== -1\" class=\"addTo\">\r\n              对  <i> {{commentToName}} </i> \r\n              <span id=\"removeAddTo\" @click=\"commentToIndex = -1\">取消</span></span>\r\n          </li>\r\n          <li><textarea name=\"content\" rows=\"2\" placeholder=\"评论\" v-model=\"addContent\"/></li>\r\n          <li><input name=\"name\" placeholder=\"名字\" v-model=\"addName\"></li>\r\n          <li><input type=\"submit\" value=\"提交\" @click=\"addComment\" :class=\"{disabled:addSending}\"></li>\r\n        </ul>\r\n      </template>\r\n      <template #right>\r\n        <rbox title='目录' :class='{mini:!miniRight}' @click='rightToggle=!rightToggle' v-if=\"titles.length > 0\">\r\n          <template #list>\r\n            <div class='item' v-for='(t, i) in titles' :key='i' :class='{second:t[1]!=undefined}' @click='jumpToTitle($event, i)'>\r\n              <span v-if='t[1]==undefined'>{{t[0]}}</span>\r\n              {{t[2]}}\r\n            </div>\r\n          </template>\r\n        </rbox>\r\n      </template>\r\n    </layout>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport Layout from '@/components/Layout.vue'\r\nimport Rbox from '@/components/Rbox.vue'\r\nimport Loading from '@/components/Loading.vue'\r\nexport default {\r\n  name: 'art',\r\n  data () {\r\n    return {\r\n      postId: 0,\r\n      //data\r\n      artData: {\r\n      },\r\n      titles: [],\r\n      commentsData: {},\r\n      commentsLoadOK: false,\r\n      navData: [],\r\n      //other setting\r\n      switch1: 0,\r\n      switch2: 0,\r\n      //addComment\r\n      commentToIndex: -1,\r\n      addName: '',\r\n      addContent: '',\r\n      addSending: false,\r\n      // right menu\r\n      rightToggle: false,\r\n      mainNode: undefined\r\n    }\r\n  },\r\n  components: {\r\n    Loading,\r\n    'layout': Layout,\r\n    'rbox': Rbox,\r\n  },\r\n  computed: {\r\n    replyToName: function () {\r\n      return id => this.commentsData[id].author_name\r\n    },\r\n    commentToName: function () {\r\n      let i = this.commentsData[this.commentToIndex]\r\n      return i ? i.author_name : ''\r\n    },\r\n    slicedDate: function () {\r\n      return function (d) {\r\n        let ds = d.split(/[-T:]/)\r\n        ds[0] = ds[0].slice(2, 4)\r\n        ds = ds.slice(0, -1)\r\n        ds = ds.slice(0,3).join('-') + ' ' + ds.slice(3,5).join(':')\r\n        return ds\r\n      }\r\n    },\r\n    miniRight: function () {\r\n      return document.body.clientWidth > 750 || this.rightToggle\r\n    },\r\n  },\r\n  created () {\r\n    this.postId = this.$route.query.id\r\n    this.fetchArticle()\r\n    this.fetchComment()\r\n  },\r\n  mounted () {\r\n    this.mainNode = document.getElementsByClassName('main')[0]\r\n  },\r\n  methods: {\r\n    addComment () {\r\n      if (this.addSending) return\r\n      if (this.addContent.replace(/\\s+/g, '') === '') {\r\n        this.$bus.$emit('pop', '姓名或评论不能为空*A*')\r\n        return\r\n      }\r\n      this.addSending = true\r\n      let form = new FormData()\r\n      let parent = this.commentToIndex == -1 ? 0 : this.commentsData[this.commentToIndex].id\r\n      form.append('author_name', this.addName)\r\n      form.append('content', this.addContent)\r\n      form.append('parent', parent)\r\n      form.append('post', this.postId)\r\n      form.append('author_email', '787817128@qq.com')\r\n      fetch(window.ip + 'comments', {\r\n        method: 'POST',\r\n        body: form\r\n      }).then(() => {\r\n        this.addSending = false\r\n        this.addName = this.addContent = ''\r\n        this.commentToIndex = -1\r\n        this.fetchComment()\r\n      })\r\n      return 0\r\n    },\r\n    fetchArticle () {\r\n      this.switch1 = 1\r\n      fetch(window.ip + 'posts/' + this.postId)\r\n      .then(res => {\r\n        return res.json()\r\n      }).then(json => {\r\n        this.artData = json\r\n        this.switch1 = 0\r\n        setTimeout(this.getTitles, 0)\r\n      })\r\n    },\r\n    getTitles() {\r\n      let reg = />([IVX]+\\.)([IVX]+)*(.+?(?=<))/g\r\n      let titles = []\r\n      let res\r\n      while ((res = reg.exec(this.artData.content.rendered)) != null)  {\r\n        titles.push([res[1], res[2], res[3]])\r\n      }\r\n      this.titles = titles\r\n    },\r\n    jumpToTitle (e, t_id) {\r\n      e.stopPropagation()\r\n      let t = this.titles[t_id].join('')\r\n      let p_nodes = document.getElementsByTagName('p')\r\n      for (let i = 0; i < p_nodes.length; i++) {\r\n        if (p_nodes[i].innerText == t) {\r\n          this.mainNode.scrollTop = p_nodes[i].offsetTop\r\n          break\r\n        }\r\n      }\r\n    },\r\n    fetchComment () {\r\n      this.switch2 = 1\r\n      fetch(window.ip + 'comments?order=asc&post=' + this.postId)\r\n      .then(res => {\r\n        return res.json()\r\n      }).then(json => {\r\n        this.commentsData = json\r\n        let l = this.commentsData.length\r\n        for (let i = 0; i < l; i++) {\r\n          let to = this.commentsData[i].parent\r\n          if (to !== 0) {\r\n            for (let j = 0; j < i; j++) {\r\n              if (this.commentsData[j].id === to) {\r\n                this.commentsData[i].toIndex = j\r\n                break\r\n              }\r\n            }\r\n          }\r\n        }\r\n        this.switch2 = 0\r\n        this.commentsLoadOK = true\r\n      })\r\n    },\r\n    reload (index) {\r\n      let id = this.navData[index].id\r\n      if (id === -1) {\r\n        this.$bus.$emit('pop', this.navData[index].title)\r\n        return\r\n      }\r\n      this.$router.push({path: 'art', query: {id: id}})\r\n      this.postId = this.$route.query.id\r\n      this.artData = {}\r\n      this.commentsData = {}\r\n      this.commentsLoadOK = false\r\n      this.navData = []\r\n      //addComment\r\n      this.commentToIndex = -1\r\n      this.addName = ''\r\n      this.addContent = ''\r\n      this.fetchArticle()\r\n      this.fetchComment()\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.art {\r\n  position: relative;\r\n  margin: 0 30%;\r\n  padding-bottom: 2rem;\r\n  border-right: 1px solid #eee;\r\n}\r\n.article {\r\n  padding: 2rem;\r\n  .time {\r\n    padding: .5rem 0;\r\n    color: #888;\r\n    font-size: 0.875rem;\r\n  }\r\n  .content {\r\n    font-size: .9375rem;\r\n    line-height: 1rem;\r\n    /deep/ p {\r\n      margin: 1.25rem 0;\r\n      line-height: 1.625rem;\r\n      text-align: left;\r\n      word-wrap: break-word;\r\n    }\r\n    /deep/ a {\r\n      text-decoration: underline;\r\n    }\r\n    /deep/ img {\r\n      max-width: 100%;\r\n      height: auto;\r\n      margin-bottom: .75rem;\r\n    }\r\n    /deep/ figcaption {\r\n      text-align: center;\r\n      color: #888;\r\n      font-size: 14px;\r\n      font-style: italic;\r\n    }\r\n    /deep/ code {\r\n      display: block;\r\n      margin: .5rem 0;\r\n      padding: .75rem 1.25rem;\r\n      line-height: 1.25rem;\r\n      text-align: left;\r\n      background-color: #FaFaFF;\r\n      word-wrap: break-word;\r\n      font-family: \"Courier New\";\r\n      border-radius: .5rem;\r\n    }\r\n    /deep/ pre {\r\n      white-space: pre-wrap;\r\n    }\r\n  }\r\n}\r\n#comment-header {\r\n  padding: 0 2rem;\r\n  font-size: .9375rem;\r\n  line-height: 1.5rem;\r\n  text-align: left;\r\n}\r\n.comment-wrapper {\r\n  padding: 0 2rem 2rem 2rem;\r\n  text-align: left;\r\n  .comment {\r\n    margin: 0.5rem 0;\r\n    font-size: 0.875rem;\r\n    .name {\r\n      font-size: 0.875rem;\r\n    }\r\n    .time, .reply{\r\n      opacity: 0;\r\n      color: #AAA;\r\n      transition: .3s ease;\r\n      margin-left: .5rem;\r\n    }\r\n    .reply {\r\n      margin-left: 1rem;\r\n      cursor: pointer;\r\n    }\r\n    &:hover .time {\r\n      opacity: 1;\r\n    }\r\n    &:hover .reply {\r\n      opacity: 1;\r\n      margin-left: .5rem;\r\n    }\r\n  }\r\n}\r\n.add {\r\n  margin: 0 2rem;\r\n  text-align: left;\r\n  font-size: 0.9375rem;\r\n  li {\r\n    margin-bottom: 1rem;\r\n    span {\r\n      margin-right: 1rem;\r\n    }\r\n    &:last-child {\r\n      margin-bottom: 0;\r\n    }\r\n  }\r\n  #removeAddTo {\r\n    cursor: pointer;\r\n    color: #888;\r\n  }\r\n  li:first-child span:first-child {\r\n    margin-left: 1rem;\r\n  }\r\n  li:last-child span{\r\n    display: inline-block;\r\n    height: 2rem;\r\n  }\r\n  input, textarea {\r\n    line-height: 1.5rem;\r\n    padding: .25rem .625rem;\r\n    border: 1px #ddd solid;\r\n    transition: .2s ease;\r\n    outline: none;\r\n    color: #2c3e50;\r\n    resize: none;\r\n    width: 8rem;\r\n    font-family: Arial, Helvetica, sans-serif;\r\n  }\r\n  input[type=submit] {\r\n    width: 4rem;\r\n  }\r\n  .disabled {\r\n    color: #AAA;\r\n  }\r\n  textarea {\r\n    width: 20rem;\r\n  }\r\n  input:focus {\r\n    border: 1px #4FB9F1 solid;\r\n  }\r\n  textarea:focus {\r\n    border: 1px #4FB9F1 solid;\r\n  }\r\n}\r\n@media (max-width: 750px) {\r\n  .art {\r\n    margin: 0;\r\n    padding: 0 0 6rem 0;\r\n    border-right: none;\r\n  }\r\n  .comment .time {\r\n    display: none;\r\n  }\r\n  .art .add li textarea {\r\n    width: calc(100% - 22px);\r\n  }\r\n  .art .article .content img {\r\n    max-width: 100%;\r\n    height: auto;\r\n  }\r\n  .right {\r\n  }\r\n}\r\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Art.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Art.vue?vue&type=template&id=60c243dd&scoped=true&\"\nimport script from \"./Art.vue?vue&type=script&lang=js&\"\nexport * from \"./Art.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Art.vue?vue&type=style&index=0&id=60c243dd&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"60c243dd\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}